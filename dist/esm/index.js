import{jsx as e,jsxs as t,Fragment as n}from"react/jsx-runtime";import{forwardRef as r,useState as o,useMemo as a,useImperativeHandle as l,useRef as i,useEffect as u}from"react";var c=function(){return c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},c.apply(this,arguments)};var s=function(e){return"object"==typeof e},f=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.filter((function(e){return!s(e)&&!1!==e})).join(" ")},p=function(r){var o=r.placeholder,l=r.separator,p=r.isLastChild,d=r.inputStyle,y=r.focus,v=r.isDisabled,h=r.hasErrored,g=r.errorStyle,m=r.focusStyle,b=r.disabledStyle,S=r.shouldAutoFocus,D=r.isInputNum,k=r.index,I=r.value,O=r.className,x=r.isInputSecure,C=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(r,["placeholder","separator","isLastChild","inputStyle","focus","isDisabled","hasErrored","errorStyle","focusStyle","disabledStyle","shouldAutoFocus","isInputNum","index","value","className","isInputSecure"]),N=i(null);u((function(){var e=N.current;e&&y&&S&&e.focus()}),[]),u((function(){var e=N.current;y&&e&&(e.focus(),e.select())}),[y]);var j=a((function(){return x?"password":D?"tel":"text"}),[x,D]);return t("div",c({className:O,style:{display:"flex",alignItems:"center"}},{children:[e("input",c({"aria-label":"".concat(0===k?"Please enter verification code. ":"").concat(D?"Digit":"Character"," ").concat(k+1),autoComplete:"off",style:Object.assign({width:"1em",textAlign:"center"},s(d)&&d,y&&s(m)&&m,v&&s(b)&&b,h&&s(g)&&g),placeholder:o,className:f(d,y&&m,v&&b,h&&g),type:j,ref:N,disabled:v,value:I||""},C)),!p&&e(n,{children:l})]}))},d=r((function(t,n){var r=t.numInputs,i=void 0===r?4:r,u=t.onChange,f=void 0===u?function(e){return console.log(e)}:u,d=t.isDisabled,y=void 0!==d&&d,v=t.shouldAutoFocus,h=void 0!==v&&v,g=t.value,m=void 0===g?"":g,b=t.isInputSecure,S=void 0!==b&&b,D=t.placeholder,k=t.isInputNum,I=t.containerStyle,O=t.inputStyle,x=t.focusStyle,C=t.separator,N=t.disabledStyle,j=t.hasErrored,w=t.errorStyle,A=t.className,E=t["data-cy"],P=t["data-testid"],F=o(0),L=F[0],B=F[1],M=a((function(){return m?m.toString().split(""):[]}),[m]),q=a((function(){if("string"==typeof D){if(D.length===i)return D;if(D.length>0)return console.error("Length of the placeholder should be equal to the number of inputs."),""}return""}),[D]);l(n,(function(){return{focusInput:T}}));var K=function(e){var t=e.join("");f(t)},R=function(e){return(k?!isNaN(parseInt(e,10)):"string"==typeof e)&&1===e.trim().length},T=function(e){var t=Math.max(Math.min(i-1,e),0);B(t)},z=function(){T(L+1)},G=function(){T(L-1)},H=function(e){M[L]=e[0],K(M)},J=function(e){if(e.preventDefault(),!y){for(var t=L,n=e.clipboardData.getData("text/plain").slice(0,i-L).split(""),r=0;r<i;++r)r>=L&&n.length>0&&(M[r]=n.shift(),t++);B(t),T(t),K(M)}},Q=function(e){8===e.keyCode||"Backspace"===e.key?(e.preventDefault(),H(""),G()):46===e.keyCode||"Delete"===e.key?(e.preventDefault(),H("")):37===e.keyCode||"ArrowLeft"===e.key?(e.preventDefault(),G()):39===e.keyCode||"ArrowRight"===e.key?(e.preventDefault(),z()):32!==e.keyCode&&" "!==e.key&&"Spacebar"!==e.key&&"Space"!==e.key||e.preventDefault()},U=function(e){if(R(e.target.value))z();else if(!k){var t=e.nativeEvent;null===t.data&&"deleteContentBackward"===t.inputType&&(e.preventDefault(),H(""),G())}},V=function(e){return function(t){B(e),t.target.select()}},W=function(){return B(-1)};return e("div",c({style:Object.assign({display:"flex"},s(I)&&I),className:s(I)?"":I},{children:new Array(i).fill(null).map((function(t,n){var r,o;return e(p,{placeholder:null!==(r=q[n])&&void 0!==r?r:"",index:n,focus:L===n,value:M[n],onChange:(o=n,function(e){var t=e.target.value;0!==o||t.length!==i?R(t)&&H(t):K(t.split(""))}),onKeyDown:Q,onInput:U,onPaste:J,onFocus:V(n),onBlur:W,separator:C,inputStyle:O,focusStyle:x,isLastChild:n===i-1,isDisabled:y,disabledStyle:N,hasErrored:j,errorStyle:w,shouldAutoFocus:h,isInputNum:k,isInputSecure:S,className:A,"data-cy":E&&"".concat(E,"-").concat(n),"data-testid":P&&"".concat(P,"-").concat(n)},n)}))}))}));export{d as OtpInput};
//# sourceMappingURL=index.js.map
